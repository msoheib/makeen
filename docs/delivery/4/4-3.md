# [4-3] Implement property performance analytics

[Back to task list](mdc:tasks.md)

## Description

Develop comprehensive property performance analytics screens showing occupancy rates, revenue per property analysis, property ROI calculations, and maintenance cost breakdowns.

## Status History

| Timestamp | Event Type | From Status | To Status | Details | User |
|-----------|------------|-------------|-----------|---------|------|
| 2024-12-22 06:00:00 | Status Change | Proposed | InProgress | Started implementation | AI_Agent |
| 2024-12-22 06:30:00 | Status Change | InProgress | Review | Completed property performance and occupancy analytics screens | AI_Agent |

## Requirements

1. **Property Performance Report Screen**
   - Individual property performance metrics
   - Occupancy rate calculations with visual indicators
   - Revenue per property with monthly trends
   - ROI calculations and profitability analysis
   - Maintenance costs per property breakdown

2. **Occupancy Analytics Screen**
   - Overall occupancy rate across portfolio
   - Property-wise occupancy comparison with charts
   - Vacancy analysis with duration tracking
   - Occupancy trends over time with line charts
   - Revenue per occupied unit calculations

3. **Enhanced Navigation Integration**
   - Update main reports screen to navigate to new property analytics
   - Consistent header and navigation patterns
   - Proper routing structure with deep linking support

4. **Data Integration Requirements**
   - Real data from properties, contracts, vouchers, maintenance tables
   - Relationship-based calculations for occupancy status
   - Financial metrics calculated from actual rental income
   - Maintenance cost correlation with property performance

## Implementation Plan

1. **Create Property Performance Report Screen**
   - Build `/reports/property-performance.tsx` with comprehensive analytics
   - Integrate with existing chart components for data visualization
   - Add property-specific metrics and KPI cards

2. **Create Occupancy Analytics Screen**
   - Build `/reports/occupancy.tsx` with portfolio-wide occupancy analysis
   - Implement occupancy rate calculations and trend analysis
   - Add vacancy duration tracking and revenue correlation

3. **Enhance API Layer**
   - Extend `reportsApi.getPropertyPerformanceReport()` for detailed analytics
   - Add occupancy calculation functions with real-time data
   - Implement ROI and revenue per unit calculations

4. **Update Navigation**
   - Replace alert dialogs with proper navigation to new screens
   - Ensure consistent routing patterns across all property reports

## Verification

✅ **Navigation Success Criteria:**
- Property performance reports accessible from main reports screen
- Proper routing without errors
- Consistent header and navigation patterns

✅ **Data Integration Success Criteria:**
- Real occupancy rates calculated from active contracts
- Revenue per property showing actual rental income
- ROI calculations based on property values and net income
- Maintenance costs properly attributed to properties

✅ **UI/UX Success Criteria:**
- Material Design 3 patterns followed
- Chart visualizations clear and informative
- Loading states and error handling functional
- Responsive design on different screen sizes

✅ **Functional Success Criteria:**
- Occupancy rates accurately reflect contract status
- Financial metrics match database calculations
- Property comparisons working correctly
- Charts and data visualization operational

## Files Modified

- `app/(drawer)/reports/property-performance.tsx` - Property performance analytics screen
- `app/(drawer)/reports/occupancy.tsx` - Portfolio occupancy analysis screen
- `app/(drawer)/(tabs)/reports.tsx` - Updated navigation links
- `lib/api.ts` - Enhanced property analytics functions (if needed)

## Test Plan

**Objective:** Verify property performance and occupancy analytics display accurate data with functional visualizations

**Test Scope:** Property analytics screens with real database integration

**Key Test Scenarios:**
1. Navigate to property performance report without errors
2. Verify occupancy rates match actual contract data
3. Test revenue calculations against database records
4. Verify ROI calculations with property values
5. Test maintenance cost attribution to properties
6. Verify charts render with real data
7. Test loading states and error handling
8. Verify responsive design and touch interactions

**Success Criteria:** All property analytics screens functional with accurate data visualization and smooth user interactions 