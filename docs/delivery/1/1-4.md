# [1-4] Implement add new tenant form

[Back to task list](mdc:tasks.md)

## Description

Create a comprehensive form for adding new tenants to the system. This includes input validation, form submission to the database, and proper user feedback. The form should capture all essential tenant information including personal details, contact information, and tenant type classification.

## Status History

| Timestamp | Event Type | From Status | To Status | Details | User |
|-----------|------------|-------------|-----------|---------|------|
| 2024-12-22 12:45:00 | Created | N/A | Proposed | Task file created for add new tenant form | AI_Agent |
| 2024-12-22 12:46:00 | Status Change | Proposed | Agreed | Task approved for implementation | User |
| 2024-12-22 12:50:00 | Status Change | Agreed | InProgress | Started implementation of add new tenant form | AI_Agent |
| 2024-12-22 13:10:00 | Status Change | InProgress | Review | Implementation completed - comprehensive tenant form with validation, FAB navigation | AI_Agent |
| 2024-12-22 13:15:00 | Status Change | Review | Done | User approved implementation - add tenant form working correctly | User |

## Requirements

### Functional Requirements
1. Create route `/tenants/add.tsx` for new tenant form
2. Form fields for all essential tenant information:
   - First name, last name (required)
   - Email address (required, validation)
   - Phone number (required)
   - Address, city, country
   - Nationality (for foreign tenant tracking)
   - ID number
   - Tenant status (active/inactive/suspended)
   - Foreign tenant checkbox
3. Form validation with error messages
4. Submit new tenant to database via API
5. Success/error feedback to user
6. Navigation back to tenants list after successful creation

### Technical Requirements
1. Use React Hook Form for form management
2. Integrate with `profilesApi.create()` function
3. Implement proper input validation and error handling
4. Use existing UI components (TextInput, Button, etc.)
5. Follow Material Design 3 patterns
6. TypeScript type safety throughout

### Non-Functional Requirements
1. Form should be responsive and user-friendly
2. Validation should provide clear, helpful error messages
3. Form submission should show loading state
4. Success should redirect to tenant details or list

## Implementation Plan

### Phase 1: Form Setup
1. Create `/app/tenants/add.tsx` file
2. Set up form structure with React Hook Form
3. Create basic form layout with header and navigation

### Phase 2: Form Fields
1. Implement all required form fields
2. Add proper input types and placeholders
3. Set up validation rules for each field
4. Add foreign tenant toggle functionality

### Phase 3: Form Submission
1. Integrate with `profilesApi.create()` API
2. Implement form validation and error handling
3. Add loading states during submission
4. Handle success and error scenarios

### Phase 4: User Experience
1. Add success feedback and navigation
2. Test form validation edge cases
3. Ensure responsive design
4. Add proper error messages

## Test Plan

### Objective
Verify that the add new tenant form correctly validates input, submits data to the database, and provides appropriate user feedback.

### Test Scope
- Form field validation
- API integration and data submission
- User feedback and navigation
- Error handling scenarios

### Key Test Scenarios

1. **Successful Tenant Creation**
   - Fill out form with valid data
   - Submit form and verify database creation
   - Check success feedback and navigation

2. **Form Validation**
   - Test required field validation
   - Test email format validation
   - Test phone number validation
   - Verify error messages display correctly

3. **Error Handling**
   - Test network error scenarios
   - Test duplicate email handling
   - Verify error messages are user-friendly

4. **Foreign Tenant Features**
   - Test foreign tenant checkbox
   - Verify nationality field behavior
   - Test appropriate data submission

### Success Criteria
- Form creates new tenants successfully
- All validation works correctly
- Error handling is robust and user-friendly
- Navigation flows work smoothly

## Verification

### Definition of Done
- [ ] Form `/tenants/add.tsx` created and functional
- [ ] All required form fields implemented
- [ ] Form validation working with clear error messages
- [ ] Successfully creates tenants in database
- [ ] Loading states and success/error feedback implemented
- [ ] Navigation back to tenants list works
- [ ] TypeScript compilation passes
- [ ] Manual testing confirms all functionality

## Files Modified

### Primary Files
- `app/tenants/add.tsx` - New tenant creation form

### Supporting Files (if needed)
- `lib/api.ts` - If new API functions needed
- `components/` - Any new form components 