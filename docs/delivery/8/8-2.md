# [8-2] Enhance ModernHeader Component

[Back to task list](mdc:tasks.md)

## Description

Enhance the existing ModernHeader component to conditionally render either a hamburger menu button or back button based on route context. This involves integrating the useRouteContext hook and implementing conditional button rendering logic.

## Status History

| Timestamp | Event Type | From Status | To Status | Details | User |
|-----------|------------|-------------|-----------|---------|------|
| 2024-12-24 15:00:00 | Created | N/A | Proposed | Task file created | AI_Agent |
| 2024-12-24 15:00:00 | Status Update | Proposed | Agreed | Task approved for implementation | AI_Agent |
| 2024-12-24 15:00:00 | Status Update | Agreed | InProgress | Started implementation | AI_Agent |
| 2024-12-24 15:10:00 | Status Update | InProgress | Done | ModernHeader component enhanced with conditional navigation buttons | AI_Agent |

## Requirements

### Functional Requirements
- **Conditional Button Rendering**: Show hamburger on tab pages, back button on non-tab pages
- **Route Context Integration**: Use useRouteContext hook for navigation decisions
- **Preserved Functionality**: Maintain existing hamburger menu functionality for tab pages
- **Back Button Functionality**: Implement back navigation for non-tab pages
- **Visual Consistency**: Maintain current header styling and layout

### Technical Requirements
- **Component Location**: Modify existing `components/ModernHeader.tsx`
- **Hook Integration**: Import and use the new useRouteContext hook
- **Icon Support**: Add back arrow icon alongside existing hamburger icon
- **TypeScript**: Maintain full type safety
- **Accessibility**: Proper accessibility labels for both button types

## Implementation Plan

### 1. Import Required Dependencies
- Import useRouteContext hook
- Import back arrow icon from appropriate icon library
- Import router for back navigation

### 2. Component Logic Enhancement
- Use useRouteContext to get navigation context
- Implement conditional rendering logic
- Preserve existing drawer navigation functionality

### 3. Back Button Implementation
- Create back button component with proper styling
- Implement back navigation handler
- Add accessibility props

### 4. Testing Integration Points
- Ensure drawer navigation still works on tab pages
- Verify back navigation works on non-tab pages
- Test visual consistency across both button types

## Verification

### Unit Tests
- [ ] Component renders hamburger button on tab pages
- [ ] Component renders back button on non-tab pages
- [ ] Hamburger button opens drawer correctly
- [ ] Back button triggers navigation correctly
- [ ] Accessibility labels are correct for both buttons

### Integration Tests
- [ ] Works correctly with route detection hook
- [ ] Navigation functions work in both modes
- [ ] Visual styling is consistent
- [ ] No layout shifts when switching between button types

### Manual Testing
- [ ] Test header on Dashboard (should show hamburger)
- [ ] Test header on Properties tab (should show hamburger)
- [ ] Test header on document viewer (should show back button)
- [ ] Test header on profile settings (should show back button)
- [ ] Verify smooth navigation experience

## Files Modified

### Updated Files
- `components/ModernHeader.tsx` - Enhanced with conditional button rendering

## Test Plan

### Objective
Verify that the ModernHeader component correctly displays the appropriate navigation button based on route context and that all navigation functionality works as expected.

### Test Scope
- Conditional button rendering
- Navigation functionality for both button types
- Visual consistency and accessibility
- Integration with route detection

### Key Test Scenarios

1. **Tab Page Header Display**
   - Navigate to Dashboard, Properties, Tenants, Reports, Settings, Documents
   - Verify hamburger button is displayed
   - Test that hamburger opens drawer correctly

2. **Non-Tab Page Header Display**
   - Navigate to document viewer, profile settings, individual pages
   - Verify back button is displayed
   - Test that back button navigates correctly

3. **Navigation Transitions**
   - Navigate from tab page to non-tab page
   - Verify header button changes appropriately
   - Test smooth visual transitions

4. **Accessibility Testing**
   - Verify screen reader labels for both button types
   - Test touch target sizes
   - Confirm keyboard navigation support

### Success Criteria
- Correct button displayed for each page type (100% accuracy)
- All navigation functionality works as expected
- Visual consistency maintained across all pages
- Accessibility requirements met
- No layout shifts or visual glitches 