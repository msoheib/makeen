# 9-11 Fix Language Loader Spinner

## Description

Ensure the language switcher properly resolves the loading indicator and falls back to English keys when Arabic translations are missing, preventing infinite loading screens.

## Status History

| Timestamp | Event Type | From Status | To Status | Details | User |
|-----------|-----------|------------|-----------|---------|------|
| 2025-06-12 13:10:00 | Created | N/A | Proposed | Task file created | AI_Agent |

## Requirements

1. Modify language switch flow so `changeLanguage()` immediately hides loading spinner even if some keys are missing.
2. Implement missing-key fallback handler (`i18n.on('missingKey', â€¦)`)
3. Unit test: switching to Arabic with partial translations does not hang; UI renders with mix of Arabic + fallback English.
4. Integration test: switching languages twice returns to working state.

## Implementation Plan

- Update `lib/i18n.ts` to add i18next `missingKeyHandler` that logs missing keys and resolves.
- Add timeout safeguard in `switchLanguage` thunk in `lib/rtl.ts` / `store` to clear spinner after 3s.
- Add jest test in `__tests__/lib/i18n.test.ts` covering missing key scenario.

## Verification

- Manual: run app, switch to Arabic; loading spinner disappears <1s and UI shows.
- Run test suite: `npx jest i18n.test.ts` passes.

## Files Modified

- `lib/i18n.ts`
- `lib/rtl.ts` (if needed)
- `lib/store.ts`
- `__tests__/lib/i18n.test.ts` 